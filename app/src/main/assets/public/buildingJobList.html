<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, user-scalable=no">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Focus Media Korea Monitoring App</title>
  <link rel="stylesheet" type="text/css" href="css/base.css"/>
  <link rel="stylesheet" type="text/css" href="css/layout.css"/>
  <link rel="stylesheet" type="text/css" href="../vendor/jquery-confirm/dist/jquery-confirm.min.css">
  <script type="text/javascript" src="../vendor/jquery/jquery-3.1.1.min.js"></script>
  <script type="text/javascript" src="../vendor/vue/vue.js"></script>
  <script type="text/javascript" src="../vendor/jquery-confirm/dist/jquery-confirm.min.js"></script>
  <script type="text/javascript" src="../vendor/common/common.js"></script>
</head>
<body id="buildingJobList">
  <article class="select-work">
    <h2>업무를 선택해주세요</h2>
    <div class="wrapper">
      <p class="date">19.12.24</p>
      <div class="status">
        <p><span>진행전</span></p>
        <p><span>진행중</span></p>
        <p><span>진행완료</span></p>
      </div>
      <ul>
        <li class="before"><p>모니터링 촬영 내역</p></li>
        <li class="doing"><p>단지 대표 이미지 촬영 내역</p></li>
        <li class="after">
          <p>광고촬영 <br> &lt;나이키 제임스르브론편 1차&gt; 촬영</p>
          <a href="#" class="btn-ad">광고보기</a>
        </li>
        <li class="before">
          <p>광고촬영 <br> &lt;나이키 제임스르브론편 1차&gt; 촬영</p>
          <a href="#" class="btn-ad">광고보기</a>
        </li>
        <li class="before">
          <p>광고촬영 <br> &lt;나이키 제임스르브론편 1차&gt; 촬영</p>
          <a href="#" class="btn-ad">광고보기</a>
        </li>
        <li class="before">
          <p>광고촬영 <br> &lt;나이키 제임스르브론편 1차&gt; 촬영</p>
          <a href="#" class="btn-ad">광고보기</a>
        </li>
      </ul>
    </div>
  </article>

<script language="javascript" type="text/javascript">
var buildingLocateId = null;
var buildingParam = {take_count: 1, building_name : "송내 자이 아파트 101동 1호기", address: "경기도 부천시 소사구 송내동 409"};
var adParam = {take_count: 5, ad_name : "설화수 이영애 2차"};
$(document).ready(function(){
  callNative('toolBar', 'main', "");
  callNative("hideBottomActionBar");

  buildingLocateId = $.urlParam("id");
  var buildingRes = dbSql("SELECT b.building_id,bl.building_locate_id, b.building_name, bl.dong, bl.unit_name, b.building_name||' '||bl.dong||' '||bl.unit_name AS building_locate_name, b.address FROM building_locate bl JOIN building b ON bl.building_id=b.building_id WHERE bl.building_locate_id='" + buildingLocateId + "'");
  console.log(buildingRes);
  buildingRes = $.parseJSON(buildingRes);
  buildingData = (!buildingRes || buildingRes[0] === "undefined" )?null:buildingRes[0];

  callNative('setTitle', buildingData.building_locate_name);

  $('.btnMonitoringShot').on('click', function() {
    // 모니터링 촬영촬영용 카메라를 연다
    callNative('camera', 'monitoring', buildingParam);
  });
  $('.btnBuildidngShot').on('click', function() {
    // 단지 대표 이미지 촬영용 카메라를 연다.
    callNative('camera', 'building', buildingParam);
  });
  $('.btnAdShot').on('click', function() {
    // 광고촬영용 카메라를 연다.
    callNative('camera', 'ad', adParam);
  });
  $('.btnAdView').on('click', function() {
    // 광고 보기를 새웹뷰로 연다.
    callNative('newWebView', 'adView.html?url=&title=광고촬영<설화수 이영애 2차>');
  });
});

function cameraResult(param, result) {
  // 촬영 타입과 결과이미지를 저장후 이동한다.
  window.localStorage.setItem("shot_mode", param);
  window.localStorage.setItem("shot_result", result);
  location.href = "buildingJobProcess.html";
}
</script>

</body>
</html>
