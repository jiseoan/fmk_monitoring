<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, user-scalable=no">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Focus Media Korea Monitoring App</title>
  <link rel="stylesheet" type="text/css" href="css/base.css"/>
  <link rel="stylesheet" type="text/css" href="css/layout.css"/>
  <link rel="stylesheet" type="text/css" href="../vendor/jquery-confirm/dist/jquery-confirm.min.css">
  <script type="text/javascript" src="../vendor/jquery/jquery-3.1.1.min.js"></script>
  <script type="text/javascript" src="../vendor/vue/vue.js"></script>
  <script type="text/javascript" src="../vendor/jquery-confirm/dist/jquery-confirm.min.js"></script>
  <script type="text/javascript" src="js/swiper.js"></script>
  <script type="text/javascript" src="../vendor/common/common.js"></script>
</head>
<body style="background: #000" id="buildingJobProcess">
  <article class="return">
    <div class="slider">
      <div class="swiper-container">
        <div class="swiper-wrapper">
          <div class="swiper-slide"><img src="asset/images/return-img.png" alt=""></div>
          <div class="swiper-slide"><img src="asset/images/return-img.png" alt=""></div>
          <div class="swiper-slide"><img src="asset/images/return-img.png" alt=""></div>
          <div class="swiper-slide"><img src="asset/images/return-img.png" alt=""></div>
        </div>
      </div>
      <div class="swiper-pagination"></div>
      <div class="swiper-navigation">
        <a class="swiper-button-prev"></a>
        <a class="swiper-button-next"></a>
      </div>
    </div>
    <div class="content">
      <p>반려</p>
      <div class="table">
        <table>
          <tr>
            <th>반려 유형</th>
            <td>동일 광고 컷 반복</td>
          </tr>
          <tr>
            <th>반려 사유</th>
            <td>
              광고 컷이 겹칩니다. <br>
              각기 다른 컷으로 촬영해주세요.
            </td>
          </tr>
        </table>
      </div>
    </div>
  </article>

<script language="javascript" type="text/javascript">
var param2 = {take_count: 1, building_name : "송내 자이 아파트 101동 1호기", address: "경기도 부천시 소사구 송내동 409"};
var param3 = {take_count: 5, ad_name : "설화수 이영애 2차"};
var shotMode = window.localStorage.getItem("shot_mode");
var shotResult = window.localStorage.getItem("shot_result");
$(document).ready(function(){
  new Swiper('.return .swiper-container', {
    loop: true,
    pagination: {
      el: '.swiper-pagination',
      type: 'fraction',
    },
    navigation: {
      nextEl: '.swiper-button-next',
      prevEl: '.swiper-button-prev',
    },
  });
  callNative('toolBar', 'main', '송내 자이 아파트 101동 1호기(test)');
  if (shotMode == "monitoring") {
    // 모니터링 촬영촬영용 설정을 한다.
    callNative('bottomActionBar', 'retakeAndAsAndConfirm', shotMode);
  } else if (shotMode == "building") {
    // 단지 대표 이미지 촬영용 설정을 한다.
    callNative('bottomActionBar', 'retakeAndConfirm', shotMode);
  } else if (shotMode == "ad") {
    // 광고촬영용 설정을 한다.
    callNative('bottomActionBar', 'retakeAndConfirm', shotMode);
  }
});

function paramData() {
  if (shotMode == "ad") {
    return param3;
  } else {
    return param2;
  }
}

function cameraResult(param, result) {
  // 촬영 타입과 결과이미지를 저장후 이동한다.
  window.localStorage.setItem("shot_mode", param);
  window.localStorage.setItem("shot_result", result);

  // shotMode = window.localStorage.getItem("shot_mode");
  // shotResult = window.localStorage.getItem("shot_result");

  // 이미지 미리보는 화면을 재갱신한다.
  preview(result);
}

function asRequest() {
  //AS요청으로 이동한다.
  location.href = "asRequest.html";
}

//let jsonString = window.localStorage.getItem("shot_result");
preview(window.localStorage.getItem("shot_result"));

function preview(jsonString) {
  let jsonObject = JSON.parse(jsonString);
  console.log("xxxxx----------------------------");
  console.log(jsonString);
  console.log(jsonObject.length);
  console.log(jsonObject[0].filepath);
  $('#preview').attr("src", jsonObject[0].filepath);
}

</script>

</body>
</html>
